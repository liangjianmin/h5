layui.define(["popup"],function(a){var g=layui.popup;a("validate",{isIdCard:function(a){var e=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],r=0;if(!/^[1-9]\d{5}(19\d{2}|[2-9]\d{3})((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])(\d{4}|\d{3}X)$/i.test(a))return!1;var s=a.substr(6,4),t=a.substr(10,2),n=a.substr(12,2);if(a.substr(6,8)!=function(a){if(a instanceof Date){var e=a.getFullYear(),r=a.getMonth()+1;r=r<10?"0"+r:r;var s=a.getDate();return""+e+r+(s=s<10?"0"+s:s)}return""}(new Date(s+"/"+t+"/"+n)))return!1;for(var i=0;i<a.length-1;i++)r+=a[i]*e[i];var l="10X98765432"[r%11];return a[a.length-1].toUpperCase()==l},isChinaName:function(a){return/^([\u4e00-\u9fa5]){2,7}$/.test(a)},is_isIdCard_18:function(a){var e=new Date,r=e.getMonth()+1,s=e.getDate(),t=e.getFullYear()-a.substring(6,10)-1;return(a.substring(10,12)<r||a.substring(10,12)==r&&a.substring(12,14)<=s)&&t++,!(t<18)},isTel:function(a){return/^1\d{10}$/.test(a)},isBankCard:function(a){return/^([1-9]{1})(\d{14}|\d{15}|\d{18})$/.test(a)},validateUserInfo:function(a,e){var r=a.srbank,s=r.is_srbank_user,t=a.bankcard_status,n=r.is_srbank_user_bindcard,i=r.need_reset_pwd_first,l=a.whether_evaluation;if(e=$.extend({userRole:"INVESTOR",validate:{signAutoBid:!1,signCreditTransfer:!1,signTransfer:!1,whetherEvaluation:!1}},e),console.log(e),s)if(n&&"UNBIND"!==t)if(i)e.resetPWDCallback&&"function"==typeof e.resetPWDCallback?e.resetPWDCallback():console.log("重置密码");else{var u=r.is_srbank_user_sign_auto_bid,d=r.is_srbank_user_sign_credit_transfer,o=r.is_srbank_user_sign_transfer;r.is_srbank_user_sign_borrower;if(!u&&e.validate.signAutoBid){var c="开启投资授权协议签约",f='<p class="text">您还未开启<a href="javascript:;" >《投资授权协议》</a>中的“自动投标签约”，请先进行签约再进行投资',b="sign_auto_bid";g.signLayer(c,f,b)}else if(!d&&e.validate.signCreditTransfer){c="开启投资授权协议签约",f='<p class="text">您还未开启<a href="javascript:;" >《投资授权协议》</a>中的“自动购买债权签约”，请先进行签约再进行投资</p>',b="sign_credit_transfer";g.signLayer(c,f,b)}else if(!o&&e.validate.signTransfer){c="开启投资授权协议签约",f='<p class="text">您还未开启<a href="javascript:;" >《投资授权协议》</a>中的“债权转让手续费签约”，请先进行签约再进行投资</p>',b="sign_transfer";g.signLayer(c,f,b)}else!l&&e.validate.whetherEvaluation?console.log("风险测评"):e.validateSuccessCallback&&"function"==typeof e.validateSuccessCallback&&e.validateSuccessCallback()}else{var _=e.behavior||"投资";e.bindCardCallback&&"function"==typeof e.bindCardCallback?e.bindCardCallback():g.bankBindCardLayer(_)}else e.openSrbankCallback&&"function"==typeof e.openSrbankCallback?e.openSrbankCallback():g.openTips02Layer(userRole)}})});