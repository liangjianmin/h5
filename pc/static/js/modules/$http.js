layui.define(["jquery","utils","path"],function(e){var d=layui.jquery,s=layui.utils,o=layui.path;var p=function(){var e="",o="";switch(window.location.hostname){case"www.dolabank.com":o="https://www.dolabank.com/apigateway/",e="https://www.dolabank.com/";break;case"www.dolabank.top":o="https://api.dolabank.top/",e="https://www.dolabank.top/";break;case"www.dolabank.club":o="https://api.dolabank.club/",e="https://www.dolabank.club/";break;case"www.dola.dev":o="https://api.dola.dev/",e="https://www.dola.dev/",o="https://api.dolabank.club/";break;default:o="https://api.dolabank.club/"}return{url:e,urlApi:o}}();e("$http",{ajax:function(l){var e=l.url||"",o=l.platform||"pc",a=l.type||"get",t=s.getCookie("token"),n=s.getRrandomStr(),r=l.data,c=s.getParams(o,t,r),i=!l.noLoading;c=s.encryption(n,c,"code"),d.ajax({type:a,url:p.urlApi+e,async:l.async,headers:{"X-Dola-Time":s.getSeconds(),"X-Dola-ClientID":s.getGuid(),"X-Dola-Code":n},data:{data:c},beforeSend:function(e){i&&layer.load(2),l.beforeSend&&"function"==typeof l.beforeSend&&l.beforeSend(e)},success:function(e,o,a){var t=a.getResponseHeader("X-Dola-Edoc"),n=e,r=s.decrypt(t,n,"code");n=JSON.parse(r);l.success&&"function"==typeof l.success&&l.success(n)},error:function(e){l.error&&"function"==typeof l.error&&l.error(e)},complete:function(e,o){layer.closeAll("loading"),l.complete&&"function"==typeof l.complete&&l.complete(e,o)}})},errorMsg:function(e){990003===e.code?layer.msg(e.msg,function(){if(0<window.location.href.indexOf("debtor_login.html")||0<window.location.href.indexOf("invest_login.html"))return!1;var e=d.cookie("user_type");window.location.href="BORROWERS"===e?o.debtorLoginUrl+encodeURIComponent(window.location.href):o.investLoginUrl+encodeURIComponent(window.location.href)}):layer.msg(e.msg)}})});